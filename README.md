# Question Database LaTeX Updater

This project provides a Python script to automate the formatting of LaTeX/mathematical expressions within a MongoDB question database. It leverages OpenAI's API to intelligently identify and wrap raw or improperly formatted LaTeX code in `\(...\)` delimiters, ensuring proper rendering on the frontend.

## Features

- Connects to a MongoDB database to fetch question data.
- Processes questions chapter by chapter for organized updates.
- Utilizes OpenAI's GPT-4 for accurate LaTeX formatting.
- Updates `question_text`, `answer`, and `options` fields.
- Includes progress indicators and error handling.

## Setup and Installation

1.  **Clone the repository:**
    ```bash
    git clone <repository_url>
    cd question-db-update
    ```

2.  **Create a virtual environment** (recommended):
    ```bash
    python3 -m venv .venv
    ```

3.  **Activate the virtual environment:**
    -   On Linux/macOS:
        ```bash
        source .venv/bin/activate
        ```
    -   On Windows (Command Prompt):
        ```bash
        .venv\Scripts\activate.bat
        ```
    -   On Windows (PowerShell):
        ```powershell
        .venv\Scripts\Activate.ps1
        ```

4.  **Install dependencies:**
    ```bash
    pip install -r requirements.txt
    ```
    *(Note: `requirements.txt` is generated from `pyproject.toml` or manually maintained for simplicity in this example.)*

5.  **Configure Environment Variables:**
    Create a `.env` file in the root directory of the project and add your sensitive credentials:
    ```
    OPENAI_API_KEY="your_openai_api_key_here"
    MONGODB_URI="your_mongodb_connection_string_here"
    ```
    Replace `"your_openai_api_key_here"` with your actual OpenAI API key and `"your_mongodb_connection_string_here"` with your MongoDB Atlas connection string. **Do not commit this file to version control.**

## Usage

To run the script and start the LaTeX formatting process:

```bash
python3 src/update_latex.py
```

The script will iterate through chapters in your database, fetch questions, apply LaTeX formatting via OpenAI, and update the database. Progress will be displayed in the terminal.

## Project Structure

```
question-db-update/
├── .venv/                  # Virtual environment (ignored by Git)
├── .gitignore              # Specifies files/directories to ignore in Git
├── pyproject.toml          # Project metadata and dependencies
├── src/                    # Source code directory
│   └── update_latex.py     # Main script for LaTeX formatting and DB updates
├── requirements.txt        # Generated by pip install from pyproject.toml
└── .env                    # Environment variables (ignored by Git)
``` # question-regex-refine-ai
